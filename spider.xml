<Spiders>
  <Spider name="MTO_Search_Full" description="Scrapes search results with full metadata from mto.to">
    <Types>
      <Field name="manga_name" type="string" />
      <Field name="manga_image" type="base64image" />
      <Field name="manga_description" type="string" />
      <Field name="genres" type="string[]" />
    </Types>
    <Target url="https://mto.to/search?word={query}">
      <Item selector="#series-list .col.item.line-b, #series-list .col.item.line-b.no-flag">
        <ProfileLink selector="a.item-cover, a.item-title" attribute="href" />
        <ProfileTarget>
          <Url selector="a.item-cover, a.item-title" attribute="href" />
          <Image selector=".col-24.col-sm-8.col-md-6.attr-cover img" attribute="src" />
        </ProfileTarget>
        <Name selector=".item-title" />
        <HighlightText selector=".highlight-text" optional="true" />
        <Genres selector=".item-genre span, .item-genre u, .item-genre b" multiple="true" />
      </Item>
    </Target>
    <Output type="json">
      <Filename pattern="search_results_full.json" />
    </Output>
    <Options>
      <LazyLoad autoScroll="true" delay="500" />
      <MaxRetries count="3" />
      <ConcurrentRequests count="5" />
    </Options>
  </Spider>

  <Spider name="Comic_CBZ_Downloader" description="Scrapes images from #viewer and packages as CBZ">
    <Types>
      <Field name="image" type="url" />
      <Field name="page_number" type="string" />
    </Types>
    <Target selector="#viewer">
      <Item selector=".item.invisible">
        <Image selector="img" attribute="src" />
        <PageNumber selector=".page-num" format="{current}/{max}" />
      </Item>
    </Target>
    <Output type="cbz">
      <Filename pattern="page-{current}.jpg" />
    </Output>
    <Options>
      <LazyLoad autoScroll="true" delay="500" />
      <MaxRetries count="3" />
      <ConcurrentRequests count="5" />
    </Options>
  </Spider>
</Spiders>
